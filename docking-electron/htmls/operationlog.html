<html lang="">
  <head>
    <link rel="stylesheet" type="text/css" href="../css/elementUiIndex.css" />
    <link rel="stylesheet" type="text/css" href="../css/global.css" />
    <link rel="stylesheet" type="text/css" href="../css/elementDesign.css" />
    <link rel="stylesheet" type="text/css" href="../css/operationlog.css" />
    <title>视塔ERP</title>
    <script src="../js/message.js"></script>
    <script src="../js/axios.js"></script>
    <script src="../js/http.js"></script>
  </head>
  <body>
    <div class="operationlog-container">
      <div class="header">
        <div class="el-date-editor--date" style="width: 180px">
          <input type="date" name="logDate" placeholder="请选择日期" />
        </div>
        <button
          class="el-button el-button--primary el-button--mini is-plain"
          type="button"
          onclick="searchLog()"
        >
          <span>查询</span>
        </button>
        <button
          class="el-button el-button--default el-button--mini btn-refresh"
          type="button"
          onclick="refresh()"
        >
          <span>刷新</span>
        </button>
        <button
          class="el-button el-button--default el-button--mini"
          type="button"
          onclick="clearLog()"
        >
          <span>清空</span>
        </button>
        <label class="el-checkbox">
          <input type="checkbox" name="onlyNotCode" value="仅看未对码" />
          <span class="el-checkbox__label">仅显示错误</span>
        </label>
      </div>
      <div class="log-content">
        <ul class="log-list"></ul>
      </div>
    </div>
  </body>
  <script>
    let elem = null;
    // 查询日志结果
    function searchLog() {
      elem.innerHTML = "";
      for (let i = 0; i < 100; i++) {
        let liDom = document.createElement("li");
        liDom.className = "log-item";
        liDom.innerText = "22日 13:08:56------数据库连接成功";
        elem.appendChild(liDom);
      }
      let params = {
        logDate: document.getElementsByName("logDate")[0].value,
      };
      formatHttp(axios, {
        method: "post",
        url: "",
        data: params,
      })
        .then((res) => {
          console.log(res);
        })
        .catch((e) => {
          messageTip(e.msg);
        });
    }
    // 清空
    function clearLog() {
      elem.innerHTML = "";
    }
    // 刷新
    function refresh() {
      searchLog();
    }
    window.onload = function () {
      elem = document.getElementsByClassName("log-list")[0];
      document.getElementsByName("logDate")[0].valueAsDate = new Date();
      searchLog();
    };
  </script>
</html>
